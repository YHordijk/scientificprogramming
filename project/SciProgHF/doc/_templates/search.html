{% extends "!search.html" %}

{% block body %}
    <a href="#" id="google-search">Search using Google</a>
    <hr>
    {{ super() }}
    <script>
        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        // set google search query from "q" query parameter
        // swhich was set by original Sphinx search
        window.onload = function() {
            document.getElementById('google-search').href = 'gsearch.html?q=' + getParameterByName('q');
        };
    </script>
{% endblock %}